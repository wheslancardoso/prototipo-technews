# ===============================
# CONFIGURAÇÃO PRINCIPAL - TECHNEWS
# ===============================

# Perfil ativo (dev para desenvolvimento, postgres para PostgreSQL, prod para produção)
spring.profiles.active=dev

# Application Configuration
spring.application.name=TechNews

# Thymeleaf Configuration
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ===============================
# = GNEWS API CONFIGURATION
# ===============================
gnews.api.key=${GNEWS_API_KEY:}
gnews.api.base-url=https://gnews.io/api/v4
gnews.api.max-articles=10
gnews.api.language=en

# ===============================
# = EMAIL CONFIGURATION
# ===============================
# Configuração para Gmail SMTP (produção) - Otimizada para deliverability
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${GMAIL_USERNAME:}
spring.mail.password=${GMAIL_APP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Configurações adicionais para melhorar deliverability
spring.mail.properties.mail.smtp.timeout=25000
spring.mail.properties.mail.smtp.connectiontimeout=25000
spring.mail.properties.mail.smtp.writetimeout=25000
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.checkserveridentity=true
spring.mail.properties.mail.smtp.ehlo=true
spring.mail.properties.mail.smtp.quitwait=false

# Headers padrão para todos os emails
spring.mail.properties.mail.smtp.from=${MAIL_FROM:${GMAIL_USERNAME:noreply@technews.com}}
spring.mail.properties.mail.mime.charset=UTF-8
spring.mail.properties.mail.mime.multipart.allowempty=true

# Configurações da aplicação para email
app.mail.from=${MAIL_FROM:${GMAIL_USERNAME:noreply@technews.com}}
app.mail.from-name=TechNews Newsletter

# ===============================
# = MAILGUN (HTTP API) CONFIGURATION
# ===============================
# Use variáveis de ambiente para evitar expor credenciais no repositório
# Habilite para enviar via API Mailgun em vez de SMTP
mailgun.enabled=${MAILGUN_ENABLED:false}
mailgun.domain=${MAILGUN_DOMAIN:}
mailgun.api.key=${MAILGUN_API_KEY:}

# ===============================
# = PRODUCTION PROFILE (PostgreSQL)
# ===============================
# Para usar PostgreSQL em produção, descomente as linhas abaixo
# e comente as configurações do H2

#spring.datasource.url=jdbc:postgresql://localhost:5432/technews
#spring.datasource.username=technews_user
#spring.datasource.password=technews_password
#spring.datasource.driver-class-name=org.postgresql.Driver
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
#spring.jpa.hibernate.ddl-auto=validate
